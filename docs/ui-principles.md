# Operations Hub UI Principles v1

> このドキュメントはUI設計・レビューの共通言語です。
> すべての画面改善はこの6原則に照らして判断します。

---

## ⚠️ 前提：このUIは「福祉現場」という制約下にある

このシステムの利用環境：

- **多忙な支援現場** — 入力に割ける時間は最小
- **同時並行作業** — 通知を見逃す、途中離脱が常態
- **高ストレス環境** — ミスへの心理的負荷が大きい
- **ITリテラシーが均一でない** — 全員がパワーユーザーではない
- **オフライン・通信不安定** — 施設内の電波状況に依存
- **記録は監査対象** — 法的責任を伴う（未入力 ＝ コンプライアンスリスク）

> [!IMPORTANT]
> 本プロジェクトにおけるUIとは「視覚デザイン」ではなく、**「業務事故を防ぐ構造」**である。
> すべての原則は「美しさ」ではなく **事故率を下げる設計思想** に基づく。

---

## 🎯 目的 Top 3

| # | 目的 | 一言 |
|---|------|------|
| 1 | **迷わせない** | 開いた1秒で「今やること」が分かる |
| 2 | **見落とさせない** | 未処理は必ず可視化、0件なら達成状態を見せる |
| 3 | **失敗しても復帰できる** | エラー後でも構造は残し、次の行動を提示する |

---

## 📐 6つの原則

### 1. 迷わせない

画面を開いた1秒で「今やること」が分かる。
**Next Action を最上段に固定**する。

### 2. 見落とさせない

未入力・未処理は必ず可視化し、0件なら **"達成状態"** として表示する。
Empty state は成功体験 ＋ 次導線。

### 3. 失敗しても復帰できる

エラーは分類して救済導線を出す。
部分失敗でも **構造は残す**（レーン、タブ、主要カード）。

### 4. 状態で表現する（操作で表現しない）

UIは操作を起点にしない。必ず **「状態」を定義してからUIを作る**。

```
状態遷移の標準モデル：
未入力 → 入力中 → 保存中 → 保存成功 → （完了）
                  ↘ 保存失敗 → リトライ
                  ↘ 競合 → 解決導線
                  ↘ オフライン → 一時保存
```

> [!IMPORTANT]
> **すべての画面は「状態マップ」を持つ。**
> 新規画面・機能追加時は、状態マップを先に定義してからUIを設計する。
> レビュー時は状態マップの網羅性を確認する。

### 5. CTA は迷子にしない

- Primary action は **1画面1つ**
- 配置は **右寄せ固定**
- 副作用のある操作は **確認 → 戻し手段** を用意する

### 6. 情報は階層化する

まず "今必要" だけ見せる。
詳細は Tabs / Accordion / Popover で押し込む。

---

## 🎨 状態色ルール

| 状態 | 色 | 用途 |
|------|----|------|
| **Success** | 🟢 Green | 完了・OK |
| **Info** | 🔵 Blue | 情報・推奨 |
| **Warning** | 🟡 Amber | 要確認（まだ戻れる） |
| **Danger** | 🔴 Red | 要対応（事故/競合/期限切れ） |
| **Pending** | ⚪ Gray（専用バッジ） | 未入力/未処理 |

---

## 🏗️ 空状態 / エラー / ローディングの型

すべての状態で **"次の行動"** を必ず提示する。

| 状態 | 表示内容 |
|------|----------|
| **Empty（0件）** | 達成メッセージ or 作成導線（CTA ボタン） |
| **Loading** | スケルトン UI + メッセージ（「読み込み中…」） |
| **Error（復旧可能）** | エラー分類 + リトライボタン + 代替導線 |
| **Error（復旧不可）** | 状況説明 + サポート導線 |
| **Offline** | 最終同期時刻 + オフラインバッジ |

---

## 📊 成功指標（3つだけ）

"洗練" を感覚にしないための定量指標。

| # | 指標 | 定義 | 基準値 |
|---|------|------|--------|
| 1 | **未入力の見落とし率** | 未入力が翌日に持ち越された割合 | **≤ 5%**（目標 0%） |
| 2 | **1タスク完了までの操作数** | 主要タスク完了までのクリック数 | **≤ 3 クリック** |
| 3 | **復帰時間** | エラー表示から再操作可能までの秒数 | **≤ 5 秒** |

> 基準値は初期値。E2E テストや計測ツールで追跡し、スプリントごとに見直す。

---

## 🗺️ 画面の優先順位（固定）

改善の順番を固定し、意思決定のブレを防ぐ。

| 優先 | 画面 | 理由 |
|------|------|------|
| 🥇 1 | `/today` | 入口 ＝ 心理安全と導線 |
| 🥈 2 | `/attendance` | 入力事故の温床 |
| 🥉 3 | `/schedule` | 見落とし・競合の温床 |
| 4 | `/dashboard` | 集約の整理 |
| 5 | `/daily` · `/support` | 最後に磨く |

---

## 🚫 アンチパターン集（やってはいけないUI）

| # | アンチパターン | なぜダメか | 正しい設計 |
|---|---------------|-----------|-----------|
| 1 | **状態を色だけで伝える** | 色覚多様性・画面輝度で見えない | 色 + アイコン + テキストの3重表現 |
| 2 | **確認なしの破壊操作** | 誤タップで取り返しがつかない | 確認ダイアログ + Undo 導線 |
| 3 | **エラーをトーストだけで表示** | 多忙な現場では見逃す | インライン表示 + 該当箇所へスクロール |
| 4 | **CTAが複数同格で並ぶ** | 「どれを押すか」で迷う = 事故 | Primary は1つ、他は Secondary/Ghost |
| 5 | **空状態が白紙** | 「壊れた？」と不安にさせる | 達成メッセージ or 作成導線を必ず出す |
| 6 | **保存ボタンを押さないと消える** | 途中離脱で入力が全滅する | 自動保存 or 離脱時の警告 |
| 7 | **ローディング中に操作可能** | 二重送信・データ不整合 | 操作をロック + スケルトン表示 |
| 8 | **成功時にフィードバックなし** | 「保存された？」と不安になる | Success トースト + 状態変化を即時反映 |
| 9 | **オフラインを無視する** | 現場で通信切れは日常 | オフラインバッジ + 一時保存 + 復帰導線 |
| 10 | **専門用語をラベルに使う** | ITリテラシー非均一の前提を忘れている | 平易な日本語 + ツールチップで補足 |

---

## 運用ルール

1. **PR 本文**にこのドキュメントへのリンクを貼る
2. **レビュー時**は6原則のどれに該当する改善かを明記する
3. **新規画面**は状態マップを PR に含める
4. **アンチパターン**に該当する実装はレビューで指摘・修正する
