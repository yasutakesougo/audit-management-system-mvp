# Compliance Roadmap (障害福祉サービス事業所向け)

本ドキュメントは、コンプライアンス要件と業務効率を両立する運営管理ダッシュボードの実装指針を、エンジニアリング観点で段階化したものです。各フェーズで作成する artefact と完了条件を明確化しました。

## Phase 1 — 基盤データと整合性の確立（進行中）
- [x] コンプライアンス領域のドメインモデル雛形（`src/domain/compliance/entities.ts`）を追加。
- [x] 個別支援計画のモック・スナップショット（`getMockSupportPlanSnapshot`）で UI と黄金の糸を可視化。
- [x] SharePoint リスト構造（Users, Contracts, SupportPlans, Attendance, Incidents）の TypeScript 定義を揃える。
- [x] 既存の `useUsers`, `useStaff` を実データ対応へ更新し、契約期限や資格期限のバリデーションを注入。

## Phase 2 — 個別支援計画ワークフローの実装
- [ ] アセスメント → 原案 → 会議 → 同意 → モニタリングの各段階をステップ UI として実装。
- [ ] 計画と日々の記録を動的に連携（活動テンプレートの自動生成・逸脱記録の必須化）。
- [ ] モニタリング期限／同意期限の自動リマインダーを`useComplianceSnapshot`（新規）で配信。

## Phase 3 — 勤怠・研修・人員配置基準の可視化
- [ ] 勤務表／出勤簿の実績入力と人員配置基準チェックロジックを追加。
- [ ] 必須研修（虐待防止、BCP、身体拘束適正化等）のスケジューリングと受講記録モジュールを提供。
- [ ] 研修未実施減算リスクをダッシュボードにリアルタイム表示。

## Phase 4 — 事故・ヒヤリハット・BCP 管理
- [ ] 構造化された事故報告フォームと自治体報告テンプレートを実装。
- [ ] BCP 文書保管庫と訓練ログ（訓練参加者、実施日、振り返り）を管理。
- [ ] 委員会（虐待防止／身体拘束適正化／感染症対策）議事録を一元化し、未開催アラートを通知。

## Phase 5 — 請求・減算リスクダッシュボード
- [ ] `AttendanceRecordPage` を SharePoint 実績に接続し、国保連 CSV を自動生成。
- [ ] 加算根拠の添付と減算リスク（計画未作成、サービス管理責任者欠如等）を統合ダッシュボードで監視。
- [ ] コマンダーズ・ビューで KPI・コンプライアンスステータス・人員配置状況を集約表示。

## Phase 6 — モバイル・外部連携対応
- [ ] モバイル最適化（PWA / React Native）で現場記録のリアルタイム入力を実現。
- [ ] セキュアメッセージングと家族・外部機関連携ポータルを実装し、同意管理とアクセスログを保持。

> 各フェーズは完了時に QA（単体＋E2E）を同時実施すること。特に Phase 2 以降は、監査証跡（変更履歴、利用者確認、同意署名）を UI 仕様と合わせて検証する。
