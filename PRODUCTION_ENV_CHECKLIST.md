# 本番環境 環境変数設定確認チェックリスト

**対象**: Cloudflare Workers / 本番デプロイ環境  
**実施日**: 2026年2月23日  
**確認対象**: Staff Attendance 機能リリース

---

## 📋 環境変数設定確認依頼

以下の環境変数が本番環境にセットされているか、**最終確認**をお願いします。

### 1. Staff Attendance 機能フラグ

```
変数名: VITE_FEATURE_STAFF_ATTENDANCE
値: 1
説明: Staff Attendance 機能を有効化
必須: Yes
期限: リリース前
```

**確認項目**:
- [ ] Cloudflare Workers KV/環境設定に `VITE_FEATURE_STAFF_ATTENDANCE=1` が設定されている
- [ ] ビルド時に正しく読み込まれている (`vite.config.ts` が参照可能)
- [ ] ステージング環境で動作確認済み ✅
- [ ] 本番環境への反映予定日が確定している

---

### 2. スケジュール管理者グループ ID

```
変数名: VITE_SCHEDULE_ADMINS_GROUP_ID
値: <適切な管理者グループの ID>
説明: スケジュール管理権限を持つ Azure AD グループ ID
必須: Yes (ユースケースによって)
期限: リリース前
```

**確認項目**:
- [ ] Azure AD 内で対象グループが特定されている
- [ ] グループ ID が有効である
- [ ] 本番環境の SharePoint サイトで該当グループが権限を持っている
- [ ] Cloudflare Workers 設定に正しく登録されている
- [ ] テスト実行で権限チェックが正常に動作している ✅

---

## 🔍 事前チェック項目

| 項目 | ステータス | 確認者 | 備考 |
|------|----------|--------|------|
| E2E テスト (45/45 合格) | ✅ | Dev | 環境変数設定後も再実行予定 |
| ユニットテスト (8/8 合格) | ✅ | Dev | localStorage モック対応済み |
| TypeScript コンパイル | ✅ | Dev | ESLint / 型チェック通過 |
| Code Review | ✅ | Review | PR #582 マージ完了 |
| **本番環境変数設定** | ⏳ | Ops/Infra | **このチェックリスト** |

---

## 🚀 リリース前タスク

```
[ ] 運用チームに環境変数設定確認依頼
[ ] 本番環境でのダミーデプロイ
[ ] E2E 本番環境での動作確認
[ ] ロールバック計画の確認
[ ] スタッフ出勤機能のアナウンス
```

---

## 📞 連絡先・確認先

**インフラ/運用チーム**:
- Cloudflare Workers 設定: [設定担当者]
- Azure AD グループ管理: [AD管理者]
- SharePoint オンライン: [SP管理者]

---

## ✅ 完了チェック

本番環境への環境変数設定が完了したら、以下で確認してください：

```bash
# 本番環境へのデプロイ後
npm run build  # ビルド実行
# Cloudflare へ deploy
```

**テスト実行**（本番環境で）:
```bash
# E2E テスト本番環境対応版
npm run test:e2e:smoke
```

---

**更新日**: 2026-02-23  
**ステータス**: waiting for Ops/Infra team
